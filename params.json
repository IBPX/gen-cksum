{"name":"gen-cksum","tagline":"A portable python script to calculate and fix the checksum of a given Sega Genesis/Mega Drive ROM file.","body":"```python\r\n#!/usr/bin/python\r\n# Written by TravistyOJ\r\n\r\nimport sys, struct\r\n\r\nif len(sys.argv) != 2:\r\n\tprint \"Usage: %s <filename>\" % sys.argv[0]\r\nelse:\r\n\twith open(sys.argv[1], 'r+b') as rom:\r\n\t\trom.seek(0x18E)\r\n\t\tcurr_cksum = struct.unpack('>H', rom.read(2))[0]\r\n\t\trom.seek(0x200)\r\n\t\tcalc_cksum = 0\r\n\t\twhile True:\r\n\t\t\tword = rom.read(2)\r\n\t\t\tif not word: break\r\n\t\t\tcalc_cksum += struct.unpack('>H', word)[0]\r\n\t\tcalc_cksum &= 0xffff\r\n\t\tprint \"Found checksum: %s\" % hex(curr_cksum)\r\n\t\tprint \"Calcd checksum: %s\" % hex(calc_cksum)\r\n\t\tif curr_cksum == calc_cksum:\r\n\t\t\tprint \"Checksum correct!\"\r\n\t\telse:\r\n\t\t\trom.seek(0x18E)\r\n\t\t\trom.write(struct.pack('>H', calc_cksum))\r\n\t\t\tprint \"Checksum fixed!\"","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}